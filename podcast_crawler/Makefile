.PHONY: help install tests lint format sort-imports clean run

help:
	@echo "Available commands: ðŸ› ï¸"
	@echo "  install       - Install dependencies and package in development mode ðŸ“¦"
	@echo "  tests         - Run tests with pytest ðŸ§ª"
	@echo "  lint          - Run linting with ruff ðŸ”"
	@echo "  format        - Format code with ruff ðŸŽ¨"
	@echo "  sort-imports  - Sort imports with ruff ðŸ“š"
	@echo "  clean         - Clean temporary files ðŸ§¹"
	@echo "  run           - Run the crawler ðŸš€"
	@echo "  help          - Show this help â„¹ï¸"

install:
	@echo "Installing dependencies... ðŸ“¦"
	pip install -r requirements.txt
	pip install -e .
	@echo "âœ… Installation completed"

tests:
	@echo "Running tests... ðŸ§ª"
	pytest tests/ -v
	@echo "âœ… Tests completed"

lint:
	@echo "Running linting... ðŸ”"
	ruff check .
	@echo "âœ… Linting completed"

format:
	@echo "Formatting code... ðŸŽ¨"
	ruff format .
	@echo "âœ… Formatting completed"

sort-imports:
	@echo "Sorting imports... ðŸ“š"
	ruff check --select I --fix .
	@echo "âœ… Imports sorted"

clean:
	@echo "Cleaning temporary files... ðŸ§¹"
	find . -type f -name "*.pyc" -delete
	find . -type d -name "__pycache__" -delete
	find . -type d -name "*.egg-info" -exec rm -rf {} + 2>/dev/null || true
	find . -type f -name ".coverage" -delete
	find . -type d -name ".pytest_cache" -exec rm -rf {} + 2>/dev/null || true
	@echo "âœ… Clean completed"

run:
	@echo "Running podcast crawler... ðŸš€"
	python -m app.crawler